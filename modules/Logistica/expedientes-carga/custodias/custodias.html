<!DOCTYPE html>
<html lang="es">
<head>
    <!-- CONFIGURACI√ìN B√ÅSICA DEL DOCUMENTO -->
    <meta charset="UTF-8">                       <!-- Define la codificaci√≥n de caracteres como UTF-8 para soportar espa√±ol -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Hace la p√°gina responsive en dispositivos m√≥viles -->
    <title>Custodias - ACOSA</title>             <!-- T√≠tulo que aparece en la pesta√±a del navegador -->
    
    <!-- ENLACES A HOJAS DE ESTILO -->
    <!-- Cargar variables y estilos globales desde public -->
    <link rel="stylesheet" href="/style.css"> <!-- Variables globales y estilos base -->
    <link rel="stylesheet" href="/modules.css"> <!-- Estilos de m√≥dulos (incluye reglas de Custodias) -->
</head>
<body>
    <!-- CONTENEDOR PRINCIPAL DEL M√ìDULO -->
    <div class="module-container">
        
        <!-- ====================================== -->
        <!-- BARRA DE ACCESOS R√ÅPIDOS -->
        <!-- ====================================== -->
        <div class="toolbar-module">
            <button id="btnNuevaCustodia" class="toolbar-btn">
                <img src="/Imagenes/Acc_Agregar.png" alt="Nueva" class="toolbar-icon">
                <span class="toolbar-label">Nueva</span>
            </button>
            <button id="btnModificarCustodia" class="toolbar-btn">
                <img src="/Imagenes/Acc_Modificar.png" alt="Modificar" class="toolbar-icon">
                <span class="toolbar-label">Modificar</span>
            </button>
            <button id="btnEliminarCustodia" class="toolbar-btn">
                <img src="/Imagenes/Acc_Cancelar.png" alt="Eliminar" class="toolbar-icon">
                <span class="toolbar-label">Eliminar</span>
            </button>
            <button id="btnFiltroFechas" class="toolbar-btn">
                <img src="/Imagenes/Acc_Filtrar.png" alt="Filtros" class="toolbar-icon">
                <span class="toolbar-label">Filtros</span>
            </button>
            
            <div class="toolbar-divider"></div>
            
            <!-- Buscador compacto -->
            <div class="toolbar-search">
                <input type="text" id="buscarCustodias" placeholder="Buscar...">
                <button id="btnBuscar" class="search-btn">
                    <img src="/Imagenes/Acc_Filtrar.png" alt="Buscar" style="width: 16px; height: 16px;">
                </button>
            </div>
        </div>

        <!-- Panel de filtros de fechas (oculto por defecto) -->
        <div class="filtros-panel" id="filtrosPanel" style="display: none;">
            <div class="filtros-content">
                <label>Fecha Inicial:</label>
                <input type="date" id="fechaInicial">
                <label>Fecha Final:</label>
                <input type="date" id="fechaFinal">
                <button class="btn btn-primary btn-sm" id="btnAplicarFiltros">Aplicar</button>
                <button class="btn btn-secondary btn-sm" id="btnLimpiarFiltros">Limpiar</button>
            </div>
        </div>

        <!-- ================================ -->
        <!-- TABLA DE CUSTODIAS -->
        <!-- ================================ -->
        <div class="table-container">
            <!-- Encabezado de la tabla con t√≠tulo -->
            <div class="table-header">
            <h3>üìã Lista de Custodias</h3>                           <!-- T√≠tulo de la secci√≥n de tabla -->
            </div>
            <!-- Contenedor de la tabla -->
            <div class="custodias-table">
                <!-- FILA DE ENCABEZADOS DE COLUMNAS -->
                <div class="table-row header-row">
                    <div class="col-id">ID Custodia</div>           <!-- Columna para ID de custodia -->
                    <div class="col-proveedor">Proveedor</div>      <!-- Columna para nombre del proveedor -->
                    <div class="col-fecha">Fecha Servicio</div>     <!-- Columna para fecha del servicio -->
                    <div class="col-tipo">Tipo Movimiento</div>     <!-- Columna para tipo de movimiento -->
                    <div class="col-ubicacion">Ubicaciones</div>    <!-- Columna para ubicaciones de origen/destino -->
                    <div class="col-estatus">Estatus</div>          <!-- Columna para estatus de la custodia -->
                    <div class="col-acciones">Acciones</div>        <!-- Columna para botones de acciones -->
                </div>
                
                <!-- CUERPO DE LA TABLA - CONTENIDO DIN√ÅMICO -->
                <div class="table-body" id="listaCustodias">
                    <!-- Estado inicial cuando no hay datos -->
                    <div class="empty-state">
                        <div>üì≠ No hay custodias registradas</div>  <!-- Mensaje de estado vac√≠o -->
                        <p>Comienza creando tu primera custodia usando el bot√≥n "Nueva Custodia"</p> <!-- Instrucci√≥n -->
                    </div>
                </div>
            </div>
        </div>

        <!-- ================================ -->
        <!-- BARRA INFERIOR UNIFICADA - ESTAD√çSTICAS, CONTADOR Y PAGINACI√ìN -->
        <!-- ================================ -->
        <div class="barra-inferior-unificada">
            <!-- SECCI√ìN IZQUIERDA: ESTAD√çSTICAS DE STATUS -->
            <div class="estadisticas-inferiores">
                <div class="stat-item-inferior">
                    <span class="stat-label-inferior">En Pendientes:</span>
                    <span class="stat-numero-inferior" id="enPendientes">0</span> <!-- Contador de pendientes -->
                </div>
                <div class="stat-item-inferior">
                    <span class="stat-label-inferior">En Solicitadas:</span>
                    <span class="stat-numero-inferior" id="enSolicitadas">0</span> <!-- Contador de solicitadas -->
                </div>
                <div class="stat-item-inferior">
                    <span class="stat-label-inferior">En Facturaci√≥n:</span>
                    <span class="stat-numero-inferior" id="enFacturacion">0</span> <!-- Contador de facturaci√≥n -->
                </div>
                <div class="stat-item-inferior">
                    <span class="stat-label-inferior">En Pago:</span>
                    <span class="stat-numero-inferior" id="enPago">0</span> <!-- Contador de pago -->
                </div>
            </div>
            
            <!-- SECCI√ìN CENTRAL: CONTADOR DE REGISTROS -->
            <div class="contador-registros">
                <span id="mostrandoRegistros">Mostrando 1-0 de 0 registros</span> <!-- Texto del contador -->
                <button id="btnRecargar" class="btn btn-icon">üîÑ</button> <!-- Bot√≥n de recarga -->
            </div>
            
            <!-- SECCI√ìN DERECHA: PAGINACI√ìN -->
            <div class="paginacion-inferior">
                <button id="btnAnterior" class="btn btn-outline" disabled>‚Üê Anterior</button> <!-- Bot√≥n p√°gina anterior -->
                <span id="infoPagina">P√°gina 1 de 1</span> <!-- Informaci√≥n de p√°gina actual -->
                <button id="btnSiguiente" class="btn btn-outline" disabled>Siguiente ‚Üí</button> <!-- Bot√≥n p√°gina siguiente -->
            </div>
        </div>

        <!-- ================================ -->
        <!-- OVERLAY DE CARGA -->
        <!-- ================================ -->
        <div class="loading-overlay" id="loading">
            <div class="loading-spinner"></div>                     <!-- Animaci√≥n de carga circular -->
            <p>Cargando custodias...</p>                            <!-- Mensaje durante la carga -->
        </div>

        <!-- ================================ -->
        <!-- MODAL DE FORMULARIO DE CUSTODIA -->
        <!-- ================================ -->
        <div class="modal-overlay" id="modalCustodia" style="display: none;">
            <div class="modal-container modal-compact">
                <!-- Header del Modal -->
                <div class="modal-header">
                    <div class="modal-title">
                        <h2 id="modalTitle">SOLICITUD DE CUSTODIA</h2>
                    </div>
                    <div class="modal-header-buttons">
                        <button class="btn-header-icon" id="btnCloseModal" title="Cerrar">‚úï</button>
                    </div>
                </div>

                <!-- Tabs del Modal -->
                <div class="modal-tabs">
                    <button class="tab-button active" data-tab="datosGenerales">
                        DATOS GENERALES
                    </button>
                    <button class="tab-button" data-tab="documentacion">
                        DOCUMENTACI√ìN
                    </button>
                </div>

                <!-- Contenido del Modal -->
                <div class="modal-content-compact">
                    <form id="formCustodia">
                        <!-- TAB: DATOS GENERALES -->
                        <div class="tab-content active" id="tabDatosGenerales">
                            <!-- Secci√≥n: SOLICITUD -->
                            <div class="collapsible-section">
                                <div class="section-header-collapse">
                                    <span class="collapse-icon">‚ñº</span>
                                    <span class="section-title-text">SOLICITUD</span>
                                </div>
                                <div class="section-body">
                                    <table class="form-table">
                                        <tr>
                                            <td class="label-cell">ID CUSTODIA</td>
                                            <td class="input-cell">
                                                <input type="text" id="modalIdCustodia" readonly>
                                            </td>
                                            <td class="label-cell">FECHA DE SOLICITUD</td>
                                            <td class="input-cell">
                                                <input type="text" id="modalFechaSolicitud" readonly>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="label-cell">PROVEEDOR <span class="required">*</span></td>
                                            <td class="input-cell" colspan="3">
                                                <select id="modalProveedor" required>
                                                    <option value="">SELECCIONE UN PROVEEDOR</option>
                                                </select>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="label-cell">FECHA DEL SERVICIO <span class="required">*</span></td>
                                            <td class="input-cell">
                                                <input type="date" id="modalFechaServicio" required>
                                            </td>
                                            <td class="label-cell">HORA DE SOLICITUD <span class="required">*</span></td>
                                            <td class="input-cell">
                                                <input type="time" id="modalHoraServicio" required>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="label-cell">TIPO DE MOVIMIENTO <span class="required">*</span></td>
                                            <td class="input-cell" colspan="3">
                                                <select id="modalTipoMovimiento" required>
                                                    <option value="">SELECCIONE TIPO DE MOVIMIENTO</option>
                                                    <option value="entrada">Entrada</option>
                                                    <option value="salida">Salida</option>
                                                    <option value="traslado">Traslado</option>
                                                </select>
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                            </div>

                            <!-- Secci√≥n: UBICACIONES -->
                            <div class="collapsible-section">
                                <div class="section-header-collapse">
                                    <span class="collapse-icon">‚ñº</span>
                                    <span class="section-title-text">UBICACIONES</span>
                                </div>
                                <div class="section-body">
                                    <div class="ubicaciones-grid">
                                        <!-- Ubicaci√≥n Inicial -->
                                        <div class="ubicacion-column">
                                            <div class="ubicacion-title">UBICACI√ìN INICIAL</div>
                                            <table class="form-table">
                                                <tr>
                                                    <td class="label-cell">Pa√≠s <span class="required">*</span></td>
                                                    <td class="input-cell">
                                                        <input type="text" id="modalInicialPais" value="M√©xico" required>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td class="label-cell">C√≥digo Postal <span class="required">*</span></td>
                                                    <td class="input-cell">
                                                        <input type="text" id="modalInicialCP" maxlength="5" required>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td class="label-cell">Estado <span class="required">*</span></td>
                                                    <td class="input-cell">
                                                        <input type="text" id="modalInicialEstado" required>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td class="label-cell">Municipio <span class="required">*</span></td>
                                                    <td class="input-cell">
                                                        <input type="text" id="modalInicialMunicipio" required>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td class="label-cell">Colonia <span class="required">*</span></td>
                                                    <td class="input-cell">
                                                        <input type="text" id="modalInicialColonia" required>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td class="label-cell">Calle y N√∫mero <span class="required">*</span></td>
                                                    <td class="input-cell">
                                                        <input type="text" id="modalInicialCalle" required>
                                                    </td>
                                                </tr>
                                            </table>
                                        </div>

                                        <!-- Ubicaci√≥n Final -->
                                        <div class="ubicacion-column">
                                            <div class="ubicacion-title">UBICACI√ìN FINAL</div>
                                            <table class="form-table">
                                                <tr>
                                                    <td class="label-cell">Pa√≠s <span class="required">*</span></td>
                                                    <td class="input-cell">
                                                        <input type="text" id="modalDestinoPais" value="M√©xico" required>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td class="label-cell">C√≥digo Postal <span class="required">*</span></td>
                                                    <td class="input-cell">
                                                        <input type="text" id="modalDestinoCP" maxlength="5" required>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td class="label-cell">Estado <span class="required">*</span></td>
                                                    <td class="input-cell">
                                                        <input type="text" id="modalDestinoEstado" required>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td class="label-cell">Municipio <span class="required">*</span></td>
                                                    <td class="input-cell">
                                                        <input type="text" id="modalDestinoMunicipio" required>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td class="label-cell">Colonia <span class="required">*</span></td>
                                                    <td class="input-cell">
                                                        <input type="text" id="modalDestinoColonia" required>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td class="label-cell">Calle y N√∫mero <span class="required">*</span></td>
                                                    <td class="input-cell">
                                                        <input type="text" id="modalDestinoCalle" required>
                                                    </td>
                                                </tr>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Secci√≥n: OBSERVACIONES -->
                            <div class="collapsible-section">
                                <div class="section-header-collapse">
                                    <span class="collapse-icon">‚ñº</span>
                                    <span class="section-title-text">OBSERVACIONES</span>
                                </div>
                                <div class="section-body">
                                    <textarea id="modalObservaciones" maxlength="1000" 
                                              placeholder="Describa los detalles del servicio de custodia..."></textarea>
                                    <div class="char-counter">
                                        <span id="modalCharCount">0</span>/1000 caracteres
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- TAB: DOCUMENTACI√ìN -->
                        <div class="tab-content" id="tabDocumentacion">
                            <div class="empty-tab">
                                <p>üìÑ Secci√≥n de documentaci√≥n en desarrollo</p>
                                <small>Aqu√≠ podr√°s adjuntar documentos relacionados con la custodia</small>
                            </div>
                        </div>
                    </form>
                </div>

                <!-- Footer del Modal con botones -->
                <div class="modal-footer">
                    <button class="btn btn-primary" id="btnGuardarModal">
                        GUARDAR
                    </button>
                    <button class="btn btn-secondary" id="btnImprimirCustodia">
                        IMPRIMIR
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- SCRIPTS JAVASCRIPT -->
    <script src="custodias.js"></script>                           <!-- Carga la l√≥gica del m√≥dulo Custodias -->
</body>
</html>