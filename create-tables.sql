-- Crear tablas de proveedores en acosa.fdb

-- Tabla principal de proveedores
CREATE TABLE TBL_PROV_DFISCALES (
  ID VARCHAR(50) NOT NULL PRIMARY KEY,
  CODIGO VARCHAR(50),
  NOMBRE VARCHAR(255),
  RFC VARCHAR(50),
  DIRECCION BLOB SUB_TYPE TEXT,
  ACTIVO SMALLINT,
  FECHA_REGISTRO VARCHAR(50)
);

-- Tabla de servicios
CREATE TABLE TBL_PROV_DSERVICIOS (
  ID INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  PROVEEDOR_ID VARCHAR(50) NOT NULL,
  SERVICIO VARCHAR(255),
  DESCRIPCION BLOB SUB_TYPE TEXT,
  CONSTRAINT FK_DSERVICIOS_PROV FOREIGN KEY (PROVEEDOR_ID) 
    REFERENCES TBL_PROV_DFISCALES(ID) ON DELETE CASCADE
);

-- Tabla de sucursales
CREATE TABLE TBL_PROV_DSUCURSALES (
  ID VARCHAR(50) NOT NULL PRIMARY KEY,
  PROVEEDOR_ID VARCHAR(50) NOT NULL,
  TIPO VARCHAR(50),
  NOMBRE VARCHAR(255),
  PAIS VARCHAR(100),
  ESTADO VARCHAR(100),
  MUNICIPIO VARCHAR(100),
  LOCALIDAD VARCHAR(100),
  CALLE VARCHAR(255),
  COLONIA VARCHAR(255),
  CP VARCHAR(20),
  CONSTRAINT FK_DSUCURSALES_PROV FOREIGN KEY (PROVEEDOR_ID) 
    REFERENCES TBL_PROV_DFISCALES(ID) ON DELETE CASCADE
);

-- Tabla de contactos/agenda
CREATE TABLE TBL_PROV_DAGENDA (
  ID INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  PROVEEDOR_ID VARCHAR(50) NOT NULL,
  NOMBRE VARCHAR(255),
  CARGO VARCHAR(100),
  TELEFONO VARCHAR(50),
  EMAIL VARCHAR(255),
  CONSTRAINT FK_DAGENDA_PROV FOREIGN KEY (PROVEEDOR_ID) 
    REFERENCES TBL_PROV_DFISCALES(ID) ON DELETE CASCADE
);

COMMIT;
