/* ==========================================================================
   CONTENEDORES PRINCIPALES Y ESTRUCTURA DEL MÓDULO 
   ========================================================================== */

   .module-container,
.form-container {
    height: 100vh;                    /* Altura de viewport completa */
    max-height: 100%;                 /* No excede el 100% del padre */
    background: var(--white-color);   /* Fondo blanco legible */
    margin: 0;                        /* Sin márgenes externos */
    padding: 0;                       /* Sin padding interno global */
    box-shadow: none;                 /* Sin sombra inicial */
    display: flex;                    /* Activa layout flex */
    flex-direction: column;           /* Apila elementos verticalmente */
    overflow: hidden;                 /* Oculta desbordes globales */
    position: relative;               /* Referencia para hijos posicionados */
    left: 0;                          /* Alinea al borde izquierdo */
    justify-content: space-between;   /* Empuja barra inferior al fondo */
}

/* ==========================================================================
   REGLAS GLOBALES PARA TABLAS (APLICA A TODOS LOS MÓDULOS)
   ========================================================================== */

/* Contenedores que albergan tablas/listados deben comportarse como flex column */
.module-container .list-container,
.module-container .table-container,
.list-container,
.table-container {
    display: flex;
    flex-direction: column;
    flex: 1 1 auto;
    min-height: 0;    /* permite que los hijos con overflow hagan scroll correctamente */
    padding: 0;
    margin: 0;
}

/* Elementos que representan tablas (clásicas o con clase específica) */
table.list-body,
[class$="-table"],
.list-body,
.table-responsive {
    width: 100%;
    display: block;               /* separar thead/tbody para scroll interno */
    border-collapse: collapse;
}

/* Thead se mantiene como tabla y ocupa todo el ancho */
table.list-body thead,
[class$="-table"] thead,
.list-body thead {
    display: table;
    width: 100%;
    table-layout: fixed;          /* usa anchos definidos por columnas */
}

/* Cuerpo con scroll interno */
table.list-body tbody,
[class$="-table"] tbody,
.list-body tbody,
.table-body {
    display: block;
    overflow-y: auto;
    overflow-x: auto;
    min-height: 0;
    max-height: 100%;
}

/* Estilos base para celdas (padding/ellipsis) */
table.list-body thead th,
table.list-body tbody td,
.list-body thead th,
.list-body tbody td,
[class$="-table"] thead th,
[class$="-table"] tbody td {
    padding: 8px 10px;
    text-overflow: ellipsis;
    overflow: hidden;
    white-space: nowrap;
    border-bottom: 1px solid var(--border-color);
}

/* Filas del tbody deben comportarse como tabla para mantener alineación */
table.list-body tbody tr,
[class$="-table"] tbody tr,
.list-body tbody tr {
    display: table;
    width: 100%;
    table-layout: fixed;
}

.module-header,
.form-header {
    display: none !important;         /* Oculta headers duplicados */
}

.header-content h1,
.header-content p {
    display: none;                    /* Evita títulos redundantes */
}

/* ==========================================================================
   TABLA DE FORMULARIO - ESTILOS HOMOLOGADOS
   ========================================================================== */
/* Aplica tamaño y fuente consistentes a todos los inputs en tablas de formulario */
.tabla-formulario-general input[type="text"],
.tabla-formulario-general input[type="email"],
.tabla-formulario-general input[type="password"],
.tabla-formulario-general input[type="number"],
.tabla-formulario-general input[type="date"],
.tabla-formulario-general select,
table.tabla-formulario-general input,
table.tabla-formulario-general select,
table.tabla-formulario-general textarea {
    font-family: var(--font-family);              /* Fuente corporativa */
    font-size: var(--Comp-FormControl-Size);      /* Tamaño homologado 12px */
    line-height: var(--Comp-FormControl-LineHeight); /* Alto de línea 1.15 */
}

/* Strong en tablas de formulario */
.tabla-formulario-general strong,
table.tabla-formulario-general strong {
    font-family: var(--font-family);              /* Fuente corporativa */
    font-weight: var(--font-weight-semibold);     /* Semi-negrita 600 */
    font-size: var(--Comp-FormLabel-Size);        /* Tamaño de etiqueta 12px */
}

/*** Secciones colapsables (global) Agrupan campos con header clickeable */

.collapsible-section {
    background: var(--white-color);           /* Fondo de la sección */
    border: 1px solid #c0c0c0;              /* Borde gris */
    margin-bottom: 6px;                       /* Separación entre secciones */
}

.collapsible-section .section-header-collapse {
    display: flex;                            /* Ícono + texto en fila */
    align-items: center;                      /* Centrado vertical */
    gap: 8px;                                 /* Separación interna */
    padding: 8px 10px;                        /* Altura del header */
    cursor: pointer;                          /* Interactivo */
    user-select: none;                        /* Evita selección */
    background: var(--background-color);      /* Fondo claro */
    border-bottom: 1px solid var(--border-color); /* Línea inferior */
}

.collapsible-section .section-header-collapse .collapse-icon {
    display: inline-block;                   /* Ícono visible */
    transition: transform 0.2s ease;         /* Rotación suave */
    font-size: 12px;                         /* Tamaño del ícono */
    color: var(--primary-color);             /* Color institucional */
}

.collapsible-section .section-header-collapse.collapsed .collapse-icon {
    transform: rotate(-90deg);               /* Indica estado cerrado */
}

.collapsible-section .section-title-text {
    font-size: var(--text-size-normal, var(--text-size-normal)); /* Tamaño del título desde tokens */
    line-height: var(--Comp-Subtitle-LineHeight, 1.2); /* Altura de línea homogénea para subtítulos */
    font-weight: var(--Comp-Subtitle-Weight, var(--font-weight-semibold)); /* Peso desde componentes */
    color: var(--text-color);                /* Color de texto */
}

.collapsible-section .section-body {
    padding: 10px;                           /* Aire interno del cuerpo */
    display: block;                          /* Mostrar siempre cuando no está colapsada */
    min-height: 80px;                        /* Altura mínima para mostrar contenido de desarrollo */
}

/* Estado colapsado: ocultar cuerpo (fallback JS ya alterna display) */
.collapsible-section .section-header-collapse.collapsed + .section-body {
    display: none !important;                /* Oculta el cuerpo al colapsar */
}

/* Título simple para subformularios (sin pestañas ni colapso) */
.subform-title {
    font-size: 12px;                        /* Tamaño de título en subformularios */
    font-weight: var(--font-weight-semibold); /* Peso semi-negrita para títulos */
    color: var(--text-color);               /* Color de texto principal */
    margin-bottom: 8px;                     /* Espacio inferior del título */
}

/* ==========================================================================
   BARRA SUPERIOR - NAVEGACIÓN Y CONTROLES
   ========================================================================== */
/*** Barra superior compacta para controles de módulo*/

.barra-superior-modulo {
    background: var(--light-color);   /* Fondo claro usando variable CSS */
    padding: 0;                       /* Sin padding */
    margin: 0;                        /* Sin margen */
    border-bottom: 1px solid var(--border-color); /* Línea separadora inferior */
    display: flex;                    /* Layout flexbox */
    justify-content: space-between;   /* Distribuye espacio entre elementos */
    align-items: center;              /* Centra verticalmente */
    flex-wrap: wrap;                  /* Permite wrap en pantallas pequeñas */
    gap: 0;                           /* Sin gap */
    flex-shrink: 0;                   /* No se reduce */
}

/* Contenedores izquierdo y derecho de la barra */
.barra-izquierda {
    display: flex;                    /* Botones en fila */
    align-items: center;              /* Centrado vertical */
    gap: var(--spacing-small);        /* Espacio entre botones (5px) */
    margin: 0;                        /* Sin margen */
    padding: 0 0 0 8px;               /* Padding izquierdo para separar del borde */
}

.barra-derecha {
    display: flex;
    align-items: center;
    gap: var(--spacing-small);        /* Espacio entre elementos (5px) */
    margin: 0;                        /* Sin margen */
    padding: 0;                       /* Sin padding */
}

/* ==========================================================================
   COMPONENTES DE BÚSQUEDA Y FILTROS
   ========================================================================== */
/*** Caja de búsqueda con input integrado */

.search-box {
    display: flex;
    background: white;                /* Fondo blanco */
    border: 1.5px solid var(--border-color); /* Borde definido */
    border-radius: var(--border-radius); /* Bordes redondeados usando variable */
    overflow: hidden;                 /* Oculta overflow interno */
    min-width: 300px;                 /* Ancho mínimo */
}

.search-box input {
    border: none;                     /* Sin borde propio */
    padding: 8px 12px;                /* Padding interno */
    flex: 1;                          /* Ocupa todo el espacio disponible */
    outline: none;                    /* Sin outline por defecto */
    font-family: var(--font-family);  /* Fuente corporativa */
    font-size: var(--Comp-FormControl-Size, var(--text-size-normal)); /* Tamaño de fuente desde componentes */
    line-height: var(--Comp-FormControl-LineHeight, 1.2);       /* Altura de línea homogénea para inputs */
}

/** Filtro de fechas con rango*/

.filtro-fechas {
    display: flex;
    align-items: center;
    gap: 8px;                         /* Espacio entre inputs */
    background: white;                /* Fondo blanco */
    border: 1.5px solid var(--border-color); /* Borde definido */
    border-radius: var(--border-radius); /* Bordes redondeados */
    padding: 2px 8px;                   /* Padding horizontal */
}

.filtro-fechas input {
    border: none;                       /* Sin borde propio */
    padding: 8px 0;                     /* Padding vertical */
    outline: none;                      /* Sin outline */
    font-family: var(--font-family);    /* Fuente corporativa */
    font-size: var(--Comp-FormControl-Size, var(--text-size-normal)); /* Tamaño de control desde componentes */
    line-height: var(--Comp-FormControl-LineHeight, 1.2);       /* Altura de línea homogénea para inputs */
    width: 110px;                       /* Ancho fijo para inputs de fecha */
}

.separador-fechas {
    color: var(--secondary-color);    /* Color secundario */
    font-size: var(--Comp-FormLabel-Size);  /* Tamaño pequeño desde componentes */
    line-height: var(--Comp-FormLabel-LineHeight, 1.0); /* Altura de línea homogénea para etiquetas */
}

/* ==========================================================================
   CONTENEDOR PRINCIPAL Y SISTEMA DE TABLAS
   ========================================================================== */
/*** Contenedor principal del contenido*/

.main-content {
    flex: 1;                          /* Ocupa todo el espacio vertical disponible */
    display: flex;                    /* Layout en columna para contenido */
    flex-direction: column;           /* Apila secciones internas */
    overflow: hidden;                 /* Oculta desbordes, scroll sólo dentro de hijos */
    padding: 0;                       /* Sin padding global */
    margin: 0;                        /* Sin margen externo */
    min-height: 0;                    /* Permite reducir altura en flex */
    height: calc(100vh - var(--footer-height)); /* Ajusta altura total restando footer */
}

/**
 * Contenedor de tabla con scroll
 */
.table-container {
    flex: 1;                          /* Ocupa el área disponible */
    display: flex;                    /* Contenedor en columna */
    flex-direction: column;           /* Header (si aplica) + body */
    overflow: hidden;                 /* Oculta desbordes verticales */
    overflow-x: auto;                 /* Scroll horizontal para tablas anchas */
    padding: 0;                       /* Sin padding interno */
    margin: 0;                        /* Sin margen externo */
    min-height: 0;                    /* Permite reducción de altura */
    height: 100%;                     /* Llena el alto disponible del main-content */
}

.table-header {
    display: none !important;         /* Evita encabezado duplicado */
    justify-content: space-between;   /* Distribución de controles */
    align-items: center;              /* Centrado vertical */
    margin-bottom: 15px;              /* Separación inferior */
    padding: 15px 0;                  /* Altura del header */
    border-bottom: 2px solid var(--border-color); /* Línea inferior marcada */
    flex-shrink: 0;                   /* No se reduce al comprimir */
}

/*** Tabla principal de custodias*/
.custodias-table {
    background: white;                /* Fondo blanco */
    border-radius: var(--border-radius); /* Bordes redondeados */
    overflow: visible;               /* Permitir que el contenido ancho provoque scroll en el contenedor padre */
    box-shadow: var(--shadow);        /* Sombra usando variable */
    display: flex;
    flex-direction: column;
    flex: 1;                          /* Ocupa espacio disponible */
    min-height: 0;                    /* Permite reducción */
    max-height: 100%;                 /* No exceder el contenedor padre */
    padding: 0;                       /* Sin padding interno */
    margin: 0;                        /* Sin margen */
}

/* Reglas globales para cualquier tabla del tipo '...-table' */

[class$="-table"] {
    font-size: var(--Comp-TableCell-Size, var(--table-font-size, var(--text-size-normal))) !important; /* Tamaño base de celdas desde componentes */
    line-height: var(--Comp-TableCell-LineHeight, var(--table-line-height, 1.3));        /* Altura de línea desde componentes */
}

[class$="-table"] .table-row > div {
    padding: var(--table-cell-padding, 4px 0px);   /* Padding de celdas centralizado */
}

[class$="-table"] .header-row > div {
    font-weight: var(--Comp-TableHeader-Weight, 600);                                  /* Encabezados destacados */
    font-size: var(--Comp-TableHeader-Size, var(--table-header-font-size, var(--text-size-normal))) !important; /* Tamaño homogéneo desde componentes */
    letter-spacing: var(--Comp-TableHeader-Spacing, 0);            /* Espaciado de letras en encabezados */
    line-height: var(--Comp-TableHeader-LineHeight, var(--table-line-height, 1.3));         /* Altura de línea encabezado */
}

/* Media query: reducir tamaño base de tablas en pantallas pequeñas usando variable dedicada */
@media (max-width: 768px) {
    :root { --table-font-size: var(--text-size-normal); }
}

/* ==========================================================================
   BARRA DE HERRAMIENTAS DE MÓDULOS
   ========================================================================== */

.toolbar-module {
    background: white;                     /* Fondo de la barra */
    padding: 2px 5px;                        /* Altura y aire compacto (−10%) */
    margin-bottom: 1px;                      /* Separación del contenido */
    display: flex;                           /* Controles en fila */
    align-items: center;                     /* Centrado vertical */
    gap: 0;                                  /* Sin separación horizontal */
    box-shadow: var(--shadow-soft);          /* Sombra sutil */
}

.toolbar-btn {
    background: transparent;                 /* Fondo sin color */
    border: 1px solid transparent;           /* Borde transparente por defecto */
    border-radius: 4px;                      /* Esquinas redondeadas */
    padding: 3px 5px;                        /* Tamaño compacto del botón (−~10%) */
    cursor: pointer;                         /* Interactivo */
    display: flex;                           /* Ícono + texto en columna */
    flex-direction: column;                  /* Ícono arriba, label abajo */
    align-items: center;                     /* Centrado horizontal */
    gap: 1px;                                /* Separación mínima entre ícono y label */
    transition: all 0.2s;                    /* Animación de hover/active */
    min-width: 40px;                         /* Ancho mínimo táctil (−~10%) */
    border-right: 1px solid #e0e0e0;         /* Separador vertical entre botones */
}

.toolbar-btn:last-of-type {
    border-right: none;                      /* Quita separador en último botón */
}

.toolbar-btn:hover {
    background: var(--background-color);     /* Fondo claro al hover */
    border-color: var(--border-color);       /* Borde visible al hover */
}

.toolbar-btn:active {
    background: var(--primary-color);        /* Fondo primario al presionar */
    color: white;                            /* Texto blanco para contraste */
}

.toolbar-btn:active .toolbar-icon {
    transform: scale(0.95);                  /* Ligera reducción del ícono */
}

.toolbar-icon {
    width: 25px;                             /* Tamaño del ícono (−~10%) */
    height: 25px;                            /* Altura del ícono (−~10%) */
    object-fit: contain;                     /* Mantener proporción sin recorte */
}

.toolbar-label {
    font-size: var(--Comp-FormLabel-Size, 12px); /* Texto pequeño desde componentes */
    line-height: var(--Comp-FormLabel-LineHeight, 1.2);     /* Altura de línea homogénea */
    font-weight: 500;                        /* Peso medio para legibilidad */
    color: var(--text-color);                /* Color estándar de texto */
    text-align: center;                      /* Centrado bajo el ícono */
}

/* Ajuste de tono para íconos de la barra (Nuevo, Filtros)
   - Normal: gris medio (coincide con texto de pestañas)
   - Hover/Active: más oscuro para resaltar selección */
.toolbar-icon {
    filter: grayscale(40%) brightness(0.50); /* Normal en gris medio */
    opacity: 0.60;                           /* Ligera atenuación */
}

/* Hover: ícono más oscuro (casi negro) */
.toolbar-btn:hover .toolbar-icon {
    filter: grayscale(0%) brightness(1);     /* Máximo contraste */
    opacity: 1;                              /* Sin atenuación */
}

/* Active: asegura el contraste al presionar */
.toolbar-btn:active .toolbar-icon {
    filter: grayscale(0%) brightness(1);     /* Máximo contraste */
    opacity: 1;
}

.toolbar-divider {
    width: 1px;                              /* Grosor del separador */
    height: 40px;                            /* Altura visible */
    background: #e0e0e0;                     /* Color gris claro */
    margin: 0 4px;                           /* Aire lateral */
    flex-shrink: 0;                          /* No se reduce en flex */
}

.toolbar-search {
    flex: 1;                                 /* Ocupa el espacio sobrante */
    max-width: 300px;                        /* Limita ancho máximo */
    margin-left: auto;                       /* Empuja a la derecha */
    display: flex;                           /* Input + botón en fila */
    gap: 4px;                                /* Separación mínima */
}

.toolbar-search input {
    flex: 1;                                 /* Input ocupa el ancho disponible */
    padding: 6px 12px;                       /* Altura y aire interno */
    border: 1.5px solid var(--border-color); /* Borde del input */
    border-radius: var(--border-radius);     /* Esquinas redondeadas */
    font-family: var(--font-family);         /* Fuente corporativa */
    font-size: var(--Comp-FormControl-Size, 13px); /* Tamaño de fuente del input desde componentes */
    line-height: var(--Comp-FormControl-LineHeight, 1.2);       /* Altura de línea homogénea para inputs */
    transition: border-color 0.2s;           /* Cambio de borde al focus */
}

.toolbar-search input:focus {
    outline: none;                           /* Quita contorno nativo */
    border-color: var(--primary-color);      /* Resalta con color primario */
}

.search-btn {
    background: white;                        /* Fondo del botón buscar */
    border: 1px solid var(--border-color);    /* Borde homogéneo */
    border-radius: var(--border-radius);      /* Esquinas redondeadas */
    padding: 5px;                             /* Tamaño del botón (−~10%) */
    cursor: pointer;                          /* Interactivo */
    transition: all 0.2s;                     /* Animación hover */
    display: flex;                            /* Centrado del ícono */
    align-items: center;                      /* Centrado vertical */
    justify-content: center;                  /* Centrado horizontal */
    width: 29px;                              /* Ancho fijo (−~10%) */
    height: 29px;                             /* Alto fijo (−~10%) */
}

.search-btn:hover {
    background: var(--background-color);      /* Fondo claro al hover */
    border-color: var(--primary-color);       /* Borde resalta al hover */
}

/* Panel de Filtros */
.filtros-panel {
    background: var(--background-color);      /* Fondo del panel */
    border: 1.5px solid var(--border-color);  /* Borde del panel */
    border-radius: var(--border-radius);      /* Esquinas redondeadas */
    padding: 12px;                            /* Aire interno */
    margin-bottom: 16px;                      /* Separación respecto a la tabla */
    animation: slideDown 0.2s ease;           /* Animación de despliegue */
}

@keyframes slideDown {
    from {                                   /* Estado inicial oculto */
        opacity: 0;                          /* Transparente */
        transform: translateY(-10px);        /* Desplazado hacia arriba */
    }
    to {                                     /* Estado final visible */
        opacity: 1;                          /* Opaco */
        transform: translateY(0);            /* Posición normal */
    }
}

.filtros-content {
    display: flex;                            /* Contenido del panel en fila */
    align-items: center;                      /* Centrado vertical */
    gap: 12px;                                /* Separación entre controles */
    flex-wrap: wrap;                          /* Permite salto de línea */
}

.filtros-content label {
    font-size: var(--Comp-FormLabel-Size); /* Tamaño de etiqueta desde componentes */
    line-height: var(--Comp-FormLabel-LineHeight, 1.2);      /* Altura de línea homogénea */
    font-weight: 500;                         /* Peso medio */
    color: var(--text-color);                 /* Color de texto */
}

.filtros-content input[type="date"] {
    padding: 6px 10px;                        /* Altura y aire interno */
    border: 1.5px solid var(--border-color);  /* Borde homogéneo */
    border-radius: var(--border-radius);      /* Esquinas redondeadas */
    font-size: var(--Comp-FormControl-Size, 12px); /* Tamaño de control desde componentes */
    line-height: var(--Comp-FormControl-LineHeight, 1.2);        /* Altura de línea homogénea */
}

.btn-sm {
    padding: 6px 14px;                        /* Tamaño compacto de botón */
    font-size: var(--ty-subtab-size, 12px);    /* Texto pequeño desde tokens */
    line-height: var(--ty-subtab-line, 1.2);   /* Altura de línea homogénea */
}

/* Responsive Toolbar */
@media (max-width: 768px) {
    .toolbar-module {
        flex-wrap: wrap;
        gap: 8px;
    }

    .toolbar-btn {
        min-width: 50px;
    }

    .toolbar-divider {
        display: none;
    }

    .toolbar-search {
        order: 10;
        width: 100%;
        max-width: 100%;
        margin-left: 0;
    }

    .filtros-content {
        flex-direction: column;
        align-items: stretch;
    }

    .filtros-content input[type="date"] {
        width: 100%;
    }
}

/* Cabecera fija de la tabla */
.table-header-fixed {
    flex-shrink: 0;                   /* No se reduce */
    min-width: max-content;           /* Ancho mínimo según contenido */
}

/* Cuerpo de tabla con scroll */
.table-body-scroll,
.table-body {
    flex: 1;                          /* Ocupa espacio disponible */
    overflow-y: auto;                 /* Scroll vertical */
    overflow-x: auto;                 /* Scroll horizontal */
    min-height: 0;                    /* Permite reducción */
    min-width: max-content;
    display: flex;                    /* Flexbox para contenido */
    flex-direction: column;           /* Dirección vertical */
    padding: 0;                       /* Sin padding */
    margin: 0;                        /* Sin margen */
}

/* ==========================================================================
   SISTEMA DE GRILLA Y FILAS DE TABLA
   ========================================================================== */

/**
 * Sistema de grilla para filas de tabla
 * 7 columnas con tamaños responsivos mínimos y máximos
 */
.table-row {
    /* Usar layout tipo tabla: hace que header y filas se alineen automáticamente.
       Las celdas se comportan como table-cell y los anchos se controlan por clases.
       Esto permite centralizar el control en modules.css. */
    display: grid;
    width: 100%;
}

/* El contenedor de la tabla actúa como tabla para alineación */
[class$="-table"] {
    display: table;
    table-layout: fixed; /* usa anchos definidos por clases */
    width: 100%;
}

/**
 * Estilos comunes para celdas de tabla y header
 */
.table-row > div,
.header-row > div {
    display: block;                   /* Celda como bloque para usar grid */
    padding: 6px 10px;               /* Padding interno */
    vertical-align: middle;
    overflow: hidden;                 /* Oculta overflow */
    text-overflow: ellipsis;          /* Texto largo con puntos suspensivos */
    white-space: nowrap;              /* Sin wrap de texto */
    border-right: 1px solid #f0f0f0;  /* Borde derecho sutil */
    position: relative;
    font-size: var(--table-font-size, var(--text-size-normal)) !important;
}

/* ==========================================================================
   CABECERA DE TABLA CON REDIMENSIONAMIENTO Y ARRASTRE
   ========================================================================== */

/*** Fila de cabecera de tabla con funcionalidad de redimensionamiento*/
.header-row {
    background: #f8f9fa !important;  /* Fondo claro de encabezado */
    color: var(--text-color) !important; /* Color de texto */
    font-weight: 300;                /* Peso ligero */
    font-size: var(--table-header-font-size, var(--text-size-large)); /* Tamaño del header */
    position: sticky;                /* Se mantiene visible al hacer scroll */
    top: 0px;                        /* Pegado al borde superior */
    z-index: 10;                     /* Por encima de las filas */
    margin: 2px solid #dee2e6;       /* Borde sutil */
    display: grid;                   /* Alineación en grid con filas */
    grid-template-columns: var(--table-cols, auto); /* Plantilla compartida con el cuerpo */
    gap: 0;                          /* Sin separación entre columnas */
}


.header-row > div {
    cursor: grab;                     /* Permite arrastrar para reordenar */
    user-select: none;                /* Bloquea selección de texto */
    position: relative;               /* Necesario para pseudo-elemento de resize */
    border-width: 1px 1px 1px 1px;    /* Borde alrededor del header */
    border-style: solid;              /* Tipo de borde */
    border-color: #e0dfdf;            /* Color del borde */
    background: #f5f5f5;              /* Fondo gris claro */
    padding: 6px 8px;                 /* Padding del encabezado */
}


.header-row > div:hover {
    background: #ebebeb;              /* Oscurece al pasar el cursor */
}

/* Indicadores de orden en encabezados */
.header-row > div.sorted-asc::after,
.header-row > div.sorted-desc::after {
    content: '';                      /* Indicador visual de orden */
    position: absolute;               /* Posicionado dentro del header */
    right: 8px;                       /* Alineado a la derecha */
    font-size: 10px;                  /* Tamaño del indicador */
}
.header-row > div.sorted-asc::after { content: '▲'; }
.header-row > div.sorted-desc::after { content: '▼'; }

/**
 * Área de redimensionamiento invisible en cabeceras*/
.header-row > div::after {
    content: '';                      /* Área de resize invisible */
    position: absolute;               /* Pegada al borde derecho */
    right: -8px;                      /* Extiende clic hacia fuera */
    top: 0;                           /* Desde arriba */
    bottom: 0;                        /* Hasta abajo */
    width: 12px;                      /* Ancho de zona clickeable */
    background: transparent;          /* Invisible */
    cursor: col-resize;               /* Cursor de redimensionamiento */
    z-index: 20;                      /* Encima del contenido */
}

.header-row > div:hover::after {
    background: rgba(0, 123, 255, 0.3); /* Muestra zona de resize al hover */
}

/*** Estados de redimensionamiento y arrastre*/
.header-row > div.resizing {
    background: rgba(0, 123, 255, 0.1); /* Indica redimensionamiento en curso */
    border-right: 2px solid #007bff;    /* Borde azul para feedback */
}

.header-row > div.dragging {
    background: rgba(40, 167, 69, 0.06); /* Visualiza arrastre */
    border: 1px dashed #28a745;         /* Borde punteado verde */
    opacity: 0.95;                      /* Contraste durante el drag */
}

.header-row > div.drop-zone {
    background: rgba(255, 193, 7, 0.1); /* Indica posible posición de drop */
    border: 1.5px dashed #ffc107;       /* Borde punteado amarillo */
}

/* ==========================================================================
   CUERPO DE TABLA Y ESTADOS VISUALES
   ========================================================================== */

/*** Filas del cuerpo de la tabla*/

.table-body .table-row {
    border-bottom: 1px solid var(--border-color); /* Línea separadora entre filas */
    transition: var(--transition);                  /* Transición en hover/estado */
}

.table-body .table-row:hover {
    background: #f8f9fa;              /* Resalta fila al pasar el cursor */
}

/*** Badges de estado para diferentes situaciones */
.status-badge {
    padding: 4px 8px;                 /* Tamaño compacto del badge */
    border-radius: 12px;              /* Bordes muy redondeados */
    font-size: 11px;                  /* Texto pequeño */
    font-weight: 600;                 /* Peso alto para destacar */
    text-transform: uppercase;        /* Convierte a mayúsculas */
}

.status-badge.pendiente {
    background: #fff3cd;              /* Fondo amarillo claro */
    color: #856404;                   /* Texto amarillo oscuro */
}

.status-badge.completado {
    background: #d4edda;              /* Fondo verde claro */
    color: #155724;                   /* Texto verde oscuro */
}

/* ==========================================================================
   COLUMNA DE ACCIONES Y BOTONES
   ========================================================================== */

/*** Contenedor de botones de acción */
.col-acciones {
    display: flex;                    /* Contenedor en fila */
    gap: 6px;                         /* Separación entre botones */
}

/* Anchos por columna centralizados: modificar aquí para afectar todos los módulos */
.col-acciones { width: 60px; }                                  /* Ancho fijo columna Acciones */
.col-acciones { position: sticky; left: 0; z-index: 5; background: var(--table-row-bg); } /* Fija a la izquierda */
.col-id { width: 100px; }
.col-codigo { width: 140px; }
.col-nombre { width: 360px; }
.col-contacto { width: 200px; }
.col-telefono { width: 160px; }
.col-email { width: 260px; }
.col-activo { width: 100px; }
.col-fecha { width: 140px; }
.col-tipo { width: 140px; }
.col-ubicacion { width: 240px; }
.col-estatus { width: 120px; }
.col-estatus { position: sticky; left: 60px; z-index: 4; background: var(--table-row-bg); }

/**
 * Botones de acción genéricos
 */
.btn-action {
    padding: var(--action-btn-padding);        /* Tamaño del botón de acción */
    font-size: var(--action-btn-font-size);    /* Texto homogéneo */
    border-radius: var(--action-btn-radius);   /* Bordes redondeados */
    border: var(--action-btn-border);          /* Borde configurable */
    cursor: pointer;                            /* Interactivo */
    transition: var(--transition);              /* Animación al hover */
}

/* Íconos dentro de botones de acción */
.btn-action img.icon-action {
    width: 18px;                                 /* Tamaño del ícono */
    height: 18px;                                /* Altura del ícono */
    display: inline-block;                       /* Ícono en línea */
    vertical-align: middle;                      /* Alineación vertical */
}

.btn-action { display: inline-flex; align-items: center; justify-content: center; gap: 6px; } /* Layout del botón */

.btn-action.view {
    background: var(--action-btn-bg);        /* Fondo caso Ver */
    color: var(--action-btn-color);          /* Color de texto */
}

.btn-action.edit {
    background: var(--action-btn-bg);        /* Fondo caso Editar */
    color: var(--action-btn-color);          /* Color de texto */
}

.btn-action.delete {
    background: var(--action-btn-bg);        /* Fondo caso Eliminar */
    color: var(--action-btn-color);          /* Color de texto */
}

/* Envoltorio opcional para agrupar botones de acción dentro de la celda */
.table-action { display:flex; gap:6px; align-items:center; } /* Envoltorio de botones dentro de celda */

/* Columnas que deben permitir wrap para mostrar contenido completo */
.col-proveedor, .col-ubicacion {
    white-space: normal;                 /* Permite varias líneas */
    max-width: none;                     /* Quita limitación de ancho */
    overflow-wrap: anywhere;             /* Rompe palabras largas si se requiere */
}

/* ==========================================================================
   ESTADO VACÍO Y MENSAJES INFORMATIVOS
   ========================================================================== */

/**
 * Estado vacío para tablas sin datos
 */
.empty-state {
    grid-column: 1 / -1;              /* Ocupa todo el ancho de la grilla */
    text-align: center;               /* Centra el texto */
    padding: 40px 20px;               /* Aire interno */
    color: var(--secondary-color);    /* Color del mensaje */
    display: flex;                    /* Contenedor flexible */
    flex-direction: column;           /* Apila título y texto */
    justify-content: center;          /* Centra verticalmente */
    align-items: center;              /* Centra horizontalmente */
    min-height: 100px;                /* Altura mínima */ 
}

.empty-state div {
    font-size: var(--ty-title-size, 18px);   /* Título desde tokens */
    line-height: var(--ty-title-line, 1.2);  /* Altura de línea homogénea */
    margin-bottom: 5px;               /* Espacio inferior con el texto */
}

.empty-state p {
    margin-bottom: 0;                 /* Elimina margen inferior */
    font-size: var(--ty-subtitle-size, 14px); /* Texto detalle desde tokens */
    line-height: var(--ty-subtitle-line, 1.2); /* Altura de línea homogénea */
}

/* Mensaje estandarizado "En desarrollo" con icono de construcción */
.en-desarrollo {
    grid-column: 1 / -1;              /* Ocupa el ancho completo */
    display: flex;                    /* Alinea ícono y texto */
    align-items: center;              /* Centrado vertical */
    justify-content: center;          /* Centrado horizontal */
    gap: var(--spacing-small);        /* Separación entre ícono y texto */
    padding: 4px 0;                   /* Espaciado compacto */
    color: var(--secondary-color);    /* Color del mensaje */
    font-size: var(--ty-td-size, var(--text-size-normal)); /* Tamaño de texto desde tokens */
    line-height: var(--ty-td-line, 1.3);                     /* Altura de línea homogénea */
}

.en-desarrollo::before {
    content: '';                      /* Inserta ícono de construcción */
    width: 20px;                      /* Ancho del ícono */
    height: 20px;                     /* Alto del ícono */
    display: inline-block;            /* Se comporta como ícono inline */
    background-image: url('../Imagenes/Ico_Construccion.png'); /* Ícono estándar */
    background-size: contain;         /* Ajusta sin recortar */
    background-repeat: no-repeat;     /* No repetir imagen */
    filter: grayscale(0.1);           /* Ajuste estético ligero */
}

/* ==========================================================================
   BARRA INFERIOR UNIFICADA - ESTADÍSTICAS Y CONTROLES
   ========================================================================== */

/**
 * Barra inferior con estadísticas y controles de paginación
 */
.barra-inferior-unificada {
    display: flex;                    /* Contenedor flexible */
    justify-content: space-between;   /* Secciones a los lados */
    align-items: center;              /* Centrado vertical */
    background: #f8f9fa;              /* Fondo gris claro */
    padding: 8px 10px;                /* Altura adecuada */
    border-top: 1px solid #dee2e6;    /* Separador superior */
    flex-wrap: wrap;                  /* Permite salto de línea en móvil */
    gap: 10px;                        /* Separación entre elementos */
    flex-shrink: 0;                   /* Evita reducción */
    width: 100%;                      /* Ocupa todo el ancho */
    order: 3;                         /* Última posición en flex */
}
/*** Contenedor de estadísticas inferiores*/
.estadisticas-inferiores {
    display: flex;                    /* Contenedor de estadísticas */
    gap: 10px;                        /* Separación entre ítems */
    align-items: center;              /* Centrado vertical */
    flex-wrap: wrap;                  /* Permite salto de línea */
    flex: 1;                          /* Ocupa el espacio disponible */
}

/**
 * Items individuales de estadística
 */
.stat-item-inferior {
    display: flex;                    /* Ítem con label + número */
    align-items: center;              /* Centrado vertical */
    gap: 10px;                         /* Separación entre label y número */
}

.stat-label-inferior {
    font-size: 12px;                  /* Tamaño del label */
    color: #6c757d;                 /* Color gris */
    font-weight: 400;                 /* Peso medio */
    white-space: nowrap;              /* Evita salto de línea */
}

.stat-numero-inferior {
    font-size: 12px;                  /* Tamaño del número */
    font-weight: 600;                 /* Peso alto */
    color: var(--primary-color);      /* Color primario */
    background: white;                /* Fondo del número */
    padding: 1px 4px;                 /* Aire interno compacto */
    border-radius: 4px;               /* Esquinas redondeadas */
    min-width: 20px;                  /* Ancho mínimo */
    text-align: center;               /* Centrado del número */
    border: 1px solid #dee2e6;        /* Borde sutil */
    box-shadow: 0 1px 2px rgba(0,0,0,0.05); /* Sombra tenue */
}

/*** Contador de registros*/
.contador-registros {
    display: flex;                    /* Contenedor del contador */
    align-items: center;              /* Centrado vertical */
    gap: 6px;                         /* Separación entre elementos */
    color: #6c757d;                   /* Color gris */
    font-size: 12px;                  /* Tamaño del texto */
    font-weight: 500;                 /* Peso medio */
    justify-content: center;          /* Centrado horizontal */
    flex: 1;                          /* Ocupa espacio disponible */
}

/**
 * Botones de icono genéricos
 */
.btn-icon {
    background: white;                /* Fondo del botón */
    border: 1px solid #dee2e6;        /* Borde sutil */
    padding: 4px 8px;                 /* Tamaño compacto */
    border-radius: var(--border-radius); /* Esquinas redondeadas */
    cursor: pointer;                  /* Interactivo */
    transition: var(--transition);    /* Animación hover */
    color: #6c757d;                   /* Color de ícono */
}

.btn-icon:hover {
    background: #e9ecef;              /* Fondo al hover */
    transform: scale(1.03);           /* Ligero escalado al hover */
    border-color: #adb5bd;            /* Borde más oscuro */
}

/**
 * Controles de paginación inferior
 */
.paginacion-inferior {
    display: flex;                    /* Controles de paginación en fila */
    align-items: center;              /* Centrado vertical */
    gap: 8px;                         /* Separación entre controles */
    color: #6c757d;                   /* Color gris */
    font-size: 11px;                  /* Tamaño del texto */
    justify-content: flex-end;        /* Alineado a la derecha */
    flex: 1;                          /* Ocupa espacio disponible */
}

/* ==========================================================================
   INPUTS Y FORMULARIOS EN TABLAS
   ========================================================================== */

.table-input {
    width: 100%;                                 /* Ocupa todo el ancho */
    padding: 8px 10px;                           /* Altura del control */
    border: 1.5px solid var(--border-color);     /* Borde homogéneo */
    border-radius: var(--border-radius);         /* Esquinas redondeadas */
    font-size: var(--ty-form-control-size, 12px); /* Tamaño de texto homologado */
    font-family: var(--font-family);             /* Fuente corporativa */
    line-height: var(--ty-form-line, 1.2);       /* Altura de línea homologada */
    transition: border-color 0.2s;               /* Cambio suave al focus */
    background: white;                           /* Fondo blanco */
}

.table-input:focus {
    outline: none;                               /* Quita contorno nativo */
    border-color: var(--primary-color);          /* Resalta borde */
    box-shadow: 0 0 0 2px rgba(47, 49, 88, 0.1); /* Halo suave */
}

.table-input:hover:not([readonly]) {
    border-color: #adb5bd;                       /* Borde ligeramente más oscuro */
}

.table-input[readonly] {
    background: var(--background-color);         /* Fondo desactivado */
    color: #6c757d;                              /* Texto gris */
    cursor: not-allowed;                         /* No interactivo */
    border-color: #dee2e6;                       /* Borde sutil */
}

.table-input::placeholder {
    color: #adb5bd;                              /* Color del placeholder */
    font-style: italic;                          /* Estilo del placeholder */
}

/* Select específico en tablas */
select.table-input {
    cursor: pointer;                              /* Interactivo */
    appearance: none;                            /* Oculta estilo nativo */
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23333' d='M6 9L1 4h10z'/%3E%3C/svg%3E"); /* Flecha personalizada */
    background-repeat: no-repeat;                /* No repetir imagen */
    background-position: right 10px center;      /* Posición de la flecha */
    padding-right: 30px;                         /* Espacio para la flecha */
}

/* Textarea en tablas */
textarea.table-input {
    resize: vertical;                            /* Permite ajustar altura */
    font-family: var(--font-family);             /* Fuente corporativa */
}

/* ==========================================================================
   LOADING OVERLAY Y SPINNER
   ========================================================================== */

.loading-overlay {
    position: fixed;                         /* Cubre toda la pantalla */
    top: 0;                                  /* Borde superior */
    left: 0;                                 /* Borde izquierdo */
    right: 0;                                /* Borde derecho */
    bottom: 0;                               /* Borde inferior */
    background: rgba(0, 0, 0, 0.6);         /* Oscurece con transparencia */
    display: flex;                           /* Centrado con flex */
    flex-direction: column;                  /* Ícono arriba, texto abajo */
    align-items: center;                     /* Centra horizontalmente */
    justify-content: center;                 /* Centra verticalmente */
    z-index: 9999;                           /* Por encima de todo */
    backdrop-filter: blur(4px);              /* Efecto de desenfoque */
}

.loading-spinner {
    width: 50px;                              /* Diámetro del spinner */
    height: 50px;                             /* Altura del spinner */
    border: 4px solid rgba(255, 255, 255, 0.3); /* Grosor y color del borde */
    border-top-color: white;                  /* Color del borde superior */
    border-radius: 50%;                       /* Forma circular */
    animation: spin 0.8s linear infinite;     /* Rotación continua */
}

@keyframes spin { to { transform: rotate(360deg); } } /* Animación de giro */

.loading-overlay p {
    color: white;                             /* Texto del mensaje */
    margin-top: 16px;                         /* Separación del spinner */
    font-size: var(--ty-subtitle-size, 16px); /* Tamaño de texto desde tokens */
    line-height: var(--ty-subtitle-line, 1.2);/* Altura de línea homogénea */
    font-weight: 500;                         /* Peso medio */
}

/* ==========================================================================
   MODULOS DE FORMULARIOS:
   ESTRUCTURA, ESTILOS Y ANIMACIONES
   ========================================================================== */

/* Capa oscura y centrado del modal en pantalla */ 
.modal-overlay {
    position: fixed;                   /* Se fija a la ventana completa */
    top: 0;                            /* Borde superior */
    left: 0;                           /* Borde izquierdo */
    right: 0;                          /* Borde derecho */
    bottom: 0;                         /* Borde inferior */
    background: rgba(0, 0, 0, 0.5);  /* Oscurece detrás del modal */
    display: flex;                     /* Centrado con flexbox */
    align-items: center;               /* Centra vertical */
    justify-content: center;           /* Centra horizontal */
    z-index: 10000;                    /* Encima de todo */
    backdrop-filter: blur(2px);        /* Desenfoque del fondo */
    animation: fadeIn 0.2s ease;       /* Entrada suave */
}

/* Contenedor principal del modal (tamaño y caja) */
.modal-container {
    background: white;               /* Fondo del modal */
    border-radius: 4px;              /* Bordes redondeados */
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3); /* Sombra flotante */
    width: 90%;                      /* Ocupa 90% del ancho de la ventana */
    max-width: var(--modal-max-width);   /* Ancho máximo desde tokens globales */
    max-height: var(--modal-max-height); /* Altura máxima desde tokens globales */
    display: flex;                   /* Layout interno vertical */
    flex-direction: column;          /* Encabezado/Contenido/Footer en columna */
    animation: slideUp 0.3s ease;    /* Animación de aparición desde abajo */
}

/* Variante más compacta de modal (útil para formularios pequeños) */
.modal-compact {
    max-width: var(--modal-compact-max-width);   /* Ancho compacto desde tokens */
    max-height: var(--modal-compact-max-height); /* Altura compacta desde tokens */
}

/* Variante aún más baja para subformularios simples (servicio, sucursal,
   contacto). Reduce la altura máxima del contenedor completo. */
.modal-small {
    max-width: 340px;   /* Ancho razonable para campos completos */
    max-height: 45vh;   /* Más bajo; se adapta mejor al contenido */
}

/* Formularios dentro de submodales pequeños: altura adaptable al contenido
   (evita que hereden el height:100vh de .form-container global) */
.modal-small .form-container {
    height: auto;
    max-height: none;
    display: block;
    overflow: visible;
}

/* Campos en submodales: ocupar prácticamente todo el ancho del cuadro */
.modal-small .section-body > table {
    width: 100%;
    margin: 0;
}

.modal-small .section-body table td:first-child {
    width: 30%;
    padding-right: 6px;
    white-space: nowrap;  /* Evita que el texto de la etiqueta se rompa raro */
}

.modal-small .section-body table td:last-child input.form-control {
    width: 100%;
    box-sizing: border-box;  /* El input llena su celda sin desbordar */
}

/* Animación de opacidad al mostrar overlay */
@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

/* Animación del contenedor subiendo al aparecer */
@keyframes slideUp {
    from { transform: translateY(20px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
}

/* Encabezado del modal (título y acciones) */
.modal-header {
    background: var(--primary-color);/* Color institucional del header */
    color: white;                  /* Texto en blanco */
    padding: 8px 18px;                /* Espaciado interno */
    display: flex;                   /* Distribución de elementos */
    justify-content: space-between;  /* Título a la izquierda, acciones a la derecha */
    align-items: center;             /* Centrado vertical */
    border-bottom: 1px solid rgba(255, 255, 255, 0.2); /* Línea sutil inferior */
}

/* Título (icono + texto) */
.modal-title {
    display: flex;                   /* Icono + texto alineados */
    align-items: center;             /* Centrado vertical */
    gap: 8px;                        /* Separación entre icono y texto */
}

/* Tamaño del icono del modal */
.modal-icon { font-size: 18px; }

/* Texto del título */
.modal-title h2 {
    margin: 0;                       /* Sin márgenes */
    font-size: var(--ty-title-size, 14px);    /* Título desde tokens */
    line-height: var(--ty-title-line, 1.2);   /* Altura de línea homogénea */
    font-weight: var(--ty-title-weight, 600); /* Peso desde tokens */
    letter-spacing: 0.5px;           /* Espaciado de letras sutil */
}

/* Botonera del header (cerrar, etc.) */
.modal-header-buttons {
    display: flex;                   /* Botones en fila */
    gap: 4px;                        /* Separación entre botones */
}

/* Botones del header (estilo de icono) */
.btn-header-icon {
    background: transparent;         /* Fondo transparente */
    border: none;                    /* Sin borde */
    color: white;                    /* Color de icono */
    font-size: 16px;                 /* Tamaño de icono */
    cursor: pointer;                 /* Manito al pasar */
    padding: 4px 8px;                /* Espaciado interno */
    border-radius: 2px;              /* Bordes suaves */
    transition: background 0.2s;     /* Hover suave */
    font-weight: bold;               /* Peso del icono */
}

/* Hover de botones del header */
.btn-header-icon:hover { background: rgba(255, 255, 255, 0.2); }

/* Pestañas superiores del modal */
.modal-tabs {
    background: var(--background-color); /* Fondo gris claro desde variable */
    display: flex;                   /* Pestañas en fila */
    border-bottom: 1px solid var(--border-color);/* Línea inferior desde variable */
}

/* Botón de pestaña (tab) */
.tab-button {
    background: var(--white-color);  /* Fondo por defecto */
    border: none;                    /* Sin borde propio */
    border-right: 1px solid var(--border-color); /* Separador entre pestañas */
    border-bottom: 1px solid var(--border-color);/* Línea inferior para relieve */
    padding: 6px 16px;               /* Altura de pestaña */
    font-size: var(--ty-tab-size, 12px);     /* Tamaño de pestañas principales */
    font-weight: var(--ty-tab-weight, 600);  /* Peso de pestañas principales */
    line-height: var(--ty-tab-line, 1.2);    /* Altura de línea pestañas principales */
    cursor: pointer;                 /* Cursor interactivo */
    transition: all 0.2s;            /* Transición suave */
    color: var(--text-color);        /* Color de texto */
}

/* Hover de pestaña */
.tab-button:hover { background: var(--background-color); }

/* Pestaña activa (contenido visible) */
.tab-button.active {
    background: var(--white-color);  /* Fondo blanco al estar activa */
    border-bottom: 1px solid var(--white-color);  /* Une con contenido */
    color: var(--primary-color);     /* Resalta con color primario */
}

/* Área de contenido para modales compactos (scroll vertical) */
.modal-content-compact {
    padding: 12px;                   /* Espaciado interno */
    overflow-y: auto;                /* Habilita scroll vertical */
    flex: 1;                         /* Ocupa altura disponible */
    background: var(--background-color); /* Fondo gris suave desde variable */
    min-height: 500px;               /* Altura mínima: sube/baja para cambiar lo visible */
    max-height: 500px;               /* Altura máxima: limita el scroll interno */
}

/* Variante más pequeña de contenido de modal para subformularios sencillos
   (ej. Agregar servicio / sucursal / contacto)
   Mantiene el mismo estilo pero con altura más baja. */
.modal-content-small {
    padding: 12px;
    overflow-y: auto;
    /* Sin flex: deja que la altura sea la del contenido */
    background: var(--background-color);
}

/* Contenido de cada pestaña: oculto por defecto */
.tab-content { display: none; }
/* Mostrar pestaña activa */
.tab-content.active { display: block; }

/* Encabezado clickeable de la sección */
.section-header-collapse {
    background: linear-gradient(to bottom, #f0f0f0 0%, #e0e0e0 100%); /* Degradado clásico SAE */
    border-bottom: 1px solid #c0c0c0;/* Línea inferior */
    padding: 6px 10px;               /* Altura del encabezado */
    cursor: pointer;                 /* Interactivo */
    display: flex;                   /* Ícono + texto en fila */
    align-items: center;             /* Centrado vertical */
    gap: 8px;                        /* Separación */
    user-select: none;               /* Evita selección de texto al click */
}

/* Hover del encabezado de sección */
.section-header-collapse:hover {
    background: linear-gradient(to bottom, #e8e8e8 0%, #d8d8d8 100%);
}

/* Ícono de colapso (triangulito) */
.collapse-icon { font-size: 10px; transition: transform 0.2s; }

/* Rotación del ícono cuando está colapsado */
.section-header-collapse.collapsed .collapse-icon { transform: rotate(-90deg); }

/* Texto del título de sección */
.section-title-text {
    font-size: var(--ty-subtitle-size, 10px);   /* Tamaño desde tokens */
    line-height: var(--ty-subtitle-line, 1.2);  /* Altura de línea desde tokens */
    font-weight: var(--ty-subtitle-weight, 700);/* Peso desde tokens */
    color: var(--text-color);                /* Color centralizado */
}

/* Homologación: Menús de módulo con desplegables del formulario */
.module-header .module-text {
    font-size: var(--ty-subtitle-size, var(--text-size-normal));
    line-height: var(--ty-subtitle-line, 1.2);
    font-weight: var(--ty-subtitle-weight, var(--font-weight-semibold));
}

.submenu-item {
    font-size: var(--ty-subtitle-size, var(--text-size-normal));
    line-height: var(--ty-subtitle-line, 1.2);
    font-weight: var(--ty-subtitle-weight, var(--font-weight-semibold));
}

/* Cuerpo de sección (área de los campos) */
.section-body {
    padding: 12px;                   /* Espaciado interno */
    overflow: hidden;                /* Oculta contenido al colapsar */
    max-height: 1000px;              /* Altura máxima al expandir */
    transition: max-height 0.3s ease, padding 0.3s ease; /* Animación suave */
}

/* Estado colapsado: ocultar cuerpo y reducir padding */
.section-header-collapse.collapsed + .section-body {
    max-height: 0;                   /* Cierra sección */
    padding: 0 12px;                 /* Mantiene bordes laterales */
    overflow: hidden;                /* Oculta contenido */
}

/* Tabla de formulario (layout clásico SAE de etiqueta/campo) */
.form-table { width: 100%; border-collapse: collapse; }
.form-table tr { border-bottom: 1px solid #e0e0e0; }
.form-table tr:last-child { border-bottom: none; }

/* Celda de etiqueta del formulario */
.label-cell {
    width: 25%;                      /* Ancho fijo para etiquetas */
    padding: 6px 8px;                /* Espaciado interno */
    font-size: var(--ty-form-label-size); /* Tamaño de etiqueta */
    font-weight: 600;                /* Peso de etiqueta */
    color: var(--text-color);        /* Color de texto (variable global) */
    background: var(--background-color); /* Fondo (variable global) */
    border-right: 1px solid var(--border-color); /* Separador (variable global) */
    vertical-align: middle;          /* Centrado vertical */
    line-height: var(--ty-form-line, 1.2); /* Altura de línea etiqueta */
}

/* Etiquetas e inputs en tablas simples de formulario dentro de secciones colapsables
   (ej. bloque "Información general" del modal de proveedores)
   - Homologa tamaño de letra con el resto de formularios
   - Usa la paleta global de texto */
.collapsible-section .section-body table td strong {
    font-size: var(--Comp-FormLabel-Size);          /* Igual que otras etiquetas de formulario desde componentes */
    font-weight: var(--font-weight-semibold);      /* Semi-negrita consistente */
    color: var(--text-color);                      /* Color de texto institucional */
}

.collapsible-section .section-body table input.form-control {
    font-family: var(--font-family);    /* Fuente corporativa */
    font-size: var(--Comp-FormControl-Size, 12px);  /* Tamaño compacto y legible desde componentes */
    line-height: var(--Comp-FormControl-LineHeight, 1.2);         /* Altura de línea homogénea para inputs */
}

/* Celda de entrada del formulario */
.input-cell { padding: 4px 8px; }

/* Inputs y selects dentro de la celda */
.input-cell input,
.input-cell select {
    width: 100%;                     /* Ocupan todo el ancho disponible */
    padding: 4px 6px;                /* Altura del control */
    border: 1px solid #c0c0c0;       /* Borde clásico SAE */
    border-radius: 2px;              /* Bordes ligeramente redondeados */
    font-size: var(--ty-form-control-size, 12px); /* Tamaño de control */
    font-family: var(--font-family); /* Fuente corporativa */
    line-height: var(--ty-form-line, 1.2); /* Altura de línea control */
}

/* Asegurar que la tabla de servicios dentro del modal mantenga el mismo tamaño de texto que los controles del formulario */
.table-servicios td,
.table-servicios th,
.table-sucursales td,
.table-sucursales th,
.table-contactos td,
.table-contactos th {
    font-size: var(--Comp-FormControl-Size, 12px); /* Tamaño de control desde componentes */
    line-height: var(--Comp-FormControl-LineHeight, 1.2); /* Altura de línea control */
    padding: 8px 10px;
    text-align: left;                 /* Contenido alineado a la izquierda */
}

/* Columnas de acciones con ancho fijo para que los botones no se desborden/encojen */
.table-servicios th:first-child,
.table-servicios td:first-child,
.table-sucursales th:first-child,
.table-sucursales td:first-child,
.table-contactos th:first-child,
.table-contactos td:first-child {
    width: 90px;
    min-width: 90px;
    max-width: 90px;
    box-sizing: border-box;
    padding-left: 6px;
}

/* Líneas horizontales sutiles y punteadas para mejorar alineación visual */
.table-servicios tbody tr td,
.table-sucursales tbody tr td,
.table-contactos tbody tr td {
    border-bottom: 1px dashed rgba(47,49,88,0.16); /* línea un poco más marcada basada en el primario */
}

/* Líneas verticales punteadas suaves para marcar límites de columnas */
.table-servicios tbody tr td + td,
.table-sucursales tbody tr td + td,
.table-contactos tbody tr td + td {
    border-left: 1px dashed rgba(47,49,88,0.16);
}

.table-servicios thead th + th,
.table-sucursales thead th + th,
.table-contactos thead th + th {
    border-left: 1px dashed rgba(47,49,88,0.25);
}

/* Encabezado con línea inferior más marcada para separar */
.table-servicios thead th,
.table-sucursales thead th,
.table-contactos thead th {
    border-bottom: 2px solid rgba(47,49,88,0.25);
}

/* Asegurar que los botones de acción sean inline-flex y no alteren el layout */
.table-servicios .btn,
.table-sucursales .btn,
.table-contactos .btn,
.table-servicios .btn-icon,
.table-sucursales .btn-icon,
.table-contactos .btn-icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 2px 4px;           /* ~50% más compacto que el tamaño base */
    font-size: 11px;            /* Ícono/texto ligeramente más pequeño */
    min-width: 20px;            /* Asegura área clickeable mínima */
    min-height: 20px;
}

/* Ajustes para listas basadas en <table> (ej. Proveedores) */
.list-body {
    width: 100%;
    border-collapse: collapse;
    display: block;               /* Permite separar thead/tbody para scroll interno */
}

.list-body thead {
    display: table;
    width: 100%;
    table-layout: fixed;          /* Usa anchos definidos por columnas para estabilidad */
}

.list-body tbody {
    display: block;
    overflow-y: auto;            /* Scroll interno solo en el cuerpo */
    overflow-x: auto;
    flex: 1 1 auto;
    max-height: calc(100%);      /* Ocupa el resto del alto disponible */
    min-height: 0;
}

.list-body thead th,
.list-body tbody td {
    padding: 8px 10px;
    text-overflow: ellipsis;
    overflow: hidden;
    white-space: nowrap;
    border-bottom: 1px solid var(--border-color);
}

/* Forzar anchos para columnas no-flexibles; dejar la columna Nombre (3) flexible */
.list-body thead th:nth-child(1), .list-body tbody td:nth-child(1) { width: 60px; }
.list-body thead th:nth-child(2), .list-body tbody td:nth-child(2) { width: 140px; }
.list-body thead th:nth-child(4), .list-body tbody td:nth-child(4) { width: 160px; }
.list-body thead th:nth-child(6), .list-body tbody td:nth-child(6) { width: 120px; }

/* Asegurar filas del tbody con layout estable */
.list-body tbody tr { display: table; width: 100%; table-layout: fixed; }


/* Estado de enfoque en inputs/selects */
.input-cell input:focus,
.input-cell select:focus {
    outline: none;                   /* Sin contorno por defecto */
    border-color: var(--primary-color); /* Resalta con color institucional */
    box-shadow: 0 0 0 1px var(--primary-color); /* Halo de enfoque */
}

/* Input solo lectura */
.input-cell input[readonly] {
    background: #f0f0f0;             /* Fondo gris (no editable) */
    color: #666;                      /* Texto gris */
    cursor: not-allowed;              /* Cursor bloqueado */
}

/* Grilla de ubicaciones (dos columnas por defecto) */
.ubicaciones-grid {
    display: grid;                   /* Usa CSS Grid */
    grid-template-columns: 1fr 1fr;  /* Dos columnas iguales */
    gap: 12px;                       /* Separación entre columnas */
}

/* Contenedor de cada bloque de ubicación */
.ubicacion-column { background: white; border: 1px solid #c0c0c0; }

/* Título de cada bloque de ubicación */
.ubicacion-title {
    background: linear-gradient(to bottom, #f0f0f0 0%, #e0e0e0 100%); /* Degradado */
    border-bottom: 1px solid #c0c0c0;/* Separador inferior */
    padding: 6px 10px;               /* Altura del título */
    font-size: var(--ty-subtitle-size, 10px);   /* Tamaño desde tokens */
    line-height: var(--ty-subtitle-line, 1.2);  /* Altura de línea desde tokens */
    font-weight: var(--ty-subtitle-weight, 700);/* Peso desde tokens */
    color: #333;                     /* Color del texto */
    text-align: center;              /* Centrado horizontal */
    letter-spacing: 0;               /* Sin espaciado extra */
}

/* Textarea para Observaciones dentro de secciones */
.section-body textarea {
    width: 100%;                     /* Ancho completo */
    min-height: 80px;                /* Altura mínima */
    padding: 6px 8px;                /* Espaciado interno */
    border: 1px solid #c0c0c0;       /* Borde clásico */
    border-radius: 2px;              /* Bordes suaves */
    font-family: var(--font-family); /* Fuente corporativa */
    font-size: 12px;                 /* Texto un poco más grande que inputs */
    resize: vertical;                /* Permite cambiar altura */
}

/* Enfoque de textarea */
.section-body textarea:focus {
    outline: none;                   /* Sin contorno por defecto */
    border-color: var(--primary-color); /* Resalta con primario */
    box-shadow: 0 0 0 1px var(--primary-color); /* Halo de enfoque */
}

/* Contador de caracteres en observaciones */
.char-counter { text-align: right; font-size: 10px; color: #666; margin-top: 4px; }

/* Indicador de campo requerido */
.required { color: #dc3545; font-weight: 700; }

/* Estado vacío de la pestaña (cuando no hay contenido) */
.empty-tab { text-align: center; padding: 0; color: var(--secondary-color); }
.empty-tab p { font-size: var(--ty-td-size, var(--text-size-normal)); line-height: var(--ty-td-line, 1.3); margin: 0; }
.empty-tab small { font-size: var(--ty-form-label-size, var(--text-size-small)); line-height: var(--ty-form-line, 1.2); color: var(--secondary-color); margin: 0; }

/* Pie del modal con botones (Aceptar/Cancelar) */
.modal-footer {
    background: var(--background-color); /* Fondo gris claro institucional */
    border-top: 1px solid var(--border-color);   /* Separador superior */
    padding: 10px 16px;              /* Espaciado interno */
    display: flex;                   /* Botones en fila */
    justify-content: center;         /* Botones centrados */
    gap: 10px;                       /* Separación entre botones */
}

/* Los botones usan el tamaño y estilo global de .btn; aquí solo controlamos alineación */

/* Responsive para Modal (comportamiento en pantallas pequeñas) */
@media (max-width: 768px) {
    .modal-compact {
        width: 95%;                  /* Menor margen lateral en móvil */
        max-height: 95vh;            /* Permite más altura disponible */
    }

     .ubicaciones-grid { grid-template-columns: 1fr; } /* Pasa a una columna */
     /* Mantener el footer del modal igual que en escritorio para que
         Guardar y Cancelar sigan en la misma fila aún en pantallas pequeñas */
}

/* ==========================================================================
   REGLAS RESPONSIVE - DISEÑO ADAPTATIVO
   ========================================================================== */

/**
 * Tablet: 1024px y menos
 */
@media (max-width: 1024px) {
    /* Ajustes para tablet: usa plantilla de columnas centralizada
       Define --table-cols en el contenedor de la tabla para controlar anchos.
       Ejemplo: --table-cols: 60px 100px 140px 1fr 160px 260px 120px; */
    .header-row {
        font-size: var(--text-size-normal);   /* Reduce tamaño del header */
    }
    .table-row {
        display: grid;                        /* Mantiene grid */
        width: 100%;                          /* Ocupa ancho completo */
        grid-template-columns: var(--table-cols, auto); /* Usa plantilla definida */
        gap: 0;                               /* Sin separación entre columnas */
    }
}

/**
 * Móvil: 768px y menos
 */
@media (max-width: 768px) {
    .header-row > div { 
        cursor: default;               /* Cursor normal en móvil */
    }
    .header-row > div::after { 
        display: none;                 /* Oculta redimensionamiento en móvil */
    }
    .barra-superior-modulo { 
        flex-direction: column;        /* Disposición vertical */
        gap: 12px; 
        padding: 12px 15px; 
    }
    .barra-izquierda, .barra-derecha { 
        width: 100%; 
        justify-content: center;       /* Centra contenido */
    }
    .search-box { 
        min-width: 250px;              /* Ancho reducido */
    }
    .filtro-fechas { 
        min-width: 200px;              /* Ancho reducido */
    }
    .main-content { 
        padding: 0 5px; 
    }
    .barra-inferior-unificada { 
        padding: 8px 15px; 
        gap: 12px; 
    }
    .estadisticas-inferiores { 
        gap: 15px; 
        width: 100%; 
        justify-content: space-between; /* Distribuye espacio */
        order: 1;                      /* Primera posición */
        flex: none;                    /* Tamaño fijo */
    }
    .stat-item-inferior { 
        flex: 1; 
        min-width: 110px; 
        justify-content: center;       /* Centra contenido */
    }
    .contador-registros { 
        width: 100%; 
        justify-content: space-between; /* Distribuye espacio */
        order: 2;                      /* Segunda posición */
        flex: none; 
    }
    .list-container {
        padding-bottom: 10px;
    }
    .table-row { 
        grid-template-columns: 1fr;    /* Una columna en móvil */
        gap: 8px; 
        text-align: center;            /* Texto centrado */
        padding: 10px 12px; 
    }
    .col-acciones { 
        justify-content: center;       /* Centra botones */
    }
    .empty-state { 
        padding: 40px 15px; 
        min-height: 150px;             /* Altura reducida */
    }
}

/**
 * Móvil pequeño: 480px y menos
 */
@media (max-width: 480px) {
    .barra-superior-modulo { 
        padding: 8px 12px; 
    }
    .search-box { 
        min-width: 200px;              /* Ancho mínimo reducido */
    }
    .filtro-fechas { 
        flex-direction: column;        /* Disposición vertical */
        gap: 5px; 
        padding: 6px; 
    }
    .filtro-fechas input { 
        width: 100%;                   /* Inputs a ancho completo */
    }
    .btn { 
        padding: 6px 10px; 
        font-size: 12px;               /* Texto más pequeño */
    }
    .barra-inferior-unificada { 
        padding: 6px 12px; 
    }
    .estadisticas-inferiores { 
        flex-direction: column;        /* Disposición vertical */
        gap: 6px; 
        align-items: flex-start;       /* Alineado a la izquierda */
    }
    .stat-item-inferior { 
        width: 100%; 
        justify-content: space-between; /* Espacio entre label y número */
    }
    .stat-label-inferior { 
        font-size: 12px;               /* Texto más pequeño */
    }
    .stat-numero-inferior { 
        font-size: 12px; 
        padding: 1px 4px;              /* Padding reducido */
    }
    .contador-registros { 
        font-size: 12px;               /* Texto más pequeño */
    }
    .paginacion-inferior { 
        font-size: 12px;               /* Texto más pequeño */
    }
    .empty-state { 
        padding: 30px 10px; 
        min-height: 120px;             /* Altura mínima reducida */
    }
}

/* ==========================================================================
   ESTILOS PARA TABLA DE PROVEEDORES
   ========================================================================== */
.list-container {
    flex: 1;
    overflow-y: auto;
    padding: 0; /* Quitar padding lateral para que la tabla llegue al borde del contenedor */
    margin: 0;  /* Asegurar que no exista margen que desplace la tabla */
}

.list-body {
    width: 100%;
    border-collapse: collapse;
    font-size: var(--ty-body-size, 14px);
    margin: 0; /* Evitar centrar la tabla con margin:auto */
}

.list-body th,
.list-body td {
    padding: 8px 12px;
    text-align: left;
    border-bottom: 1px solid var(--border-color);
}

.list-body th {
    background: var(--background-color);
    font-weight: 600;
    position: sticky;
    top: 0;
    z-index: 10;
}

.list-body tr:hover {
    background: var(--hover-color, #f5f5f5);
}

.list-body button {
    background: none;
    border: none;
    cursor: pointer;
    font-size: 16px;
    margin: 0 2px;
    padding: 4px;
    border-radius: 4px;
}

.list-body button:hover {
    background: var(--primary-color);
    color: white;
}