<!DOCTYPE html>
<html lang="es">
<head>
    <!-- CONFIGURACI√ìN B√ÅSICA DEL DOCUMENTO -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Proveedores - ACOSA</title>
  
    <!-- ENLACES A HOJAS DE ESTILO -->
    <!-- Cargar variables y estilos globales desde public -->
    <link rel="stylesheet" href="/Style.css">  <!-- Variables globales y estilos base (normalizado seg√∫n custodias) -->
    <link rel="stylesheet" href="/modules.css"> <!-- Estilos de m√≥dulos -->
</head>
<body>
        <!-- CONTENEDOR PRINCIPAL DEL M√ìDULO
            Qu√© es: caja grande que envuelve toda la vista de Proveedores.
            Para qu√© sirve: ordenar la barra, lista, barra inferior y el modal.
            C√≥mo se usa: dentro van las secciones visuales del m√≥dulo. -->
    <div class="module-container">
        
        <!-- ====================================== -->
        <!-- BARRA DE ACCESOS R√ÅPIDOS -->
        <!-- ====================================== -->
      
           <!-- BARRA DE ACCIONES (toolbar)
               Qu√© es: botones r√°pidos (Nuevo, Filtros) y buscador.
               C√≥mo se usa: el JS conecta estos IDs para abrir modales y buscar. -->
           <div class="toolbar-module">
            <button id="btnNuevo" class="toolbar-btn">
                <img src="/Imagenes/Acc_Agregar.png" alt="Nuevo" class="toolbar-icon">
                <span class="toolbar-label">Nuevo</span>
            </button>
            <button id="btnFiltroFechas" class="toolbar-btn">
                <img src="/Imagenes/Acc_Filtrar.png" alt="Filtros" class="toolbar-icon">
                <span class="toolbar-label">Filtros</span>
            </button>
            
            <div class="toolbar-divider"></div>
            <div class="toolbar-search">
                <input type="text" id="buscar" placeholder="Buscar...">
                <button id="btnBuscar" class="search-btn">
                    <img src="/Imagenes/Acc_Filtrar.png" alt="Buscar" style="width:16px;height:16px;">
                </button>
            </div>
        </div>    

        <!-- Contenedor de lista m√≠nimo (sin tablas) -->
                 <!-- LISTA DE PROVEEDORES (como tabla)
                     Qu√© es: una tabla para mostrar los proveedores.
                     C√≥mo se usa: el JS agrega filas dentro del tbody. -->
                 <div class="list-container">
                    <table class="list-body" id="listaProveedores">
                        <thead>
                            <tr>
                                <th>Acciones</th>
                                <th data-sort="codigo">C√≥digo</th>
                                <th data-sort="nombre">Nombre</th>
                                <th data-sort="rfc">RFC</th>
                                <th data-sort="direccion">Direcci√≥n fiscal</th>
                                <th data-sort="activo">Estatus</th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                </div>

                 <!-- BARRA INFERIOR (estad√≠sticas + paginaci√≥n)
                     Qu√© es: indicadores (Activos/Inactivos) y controles de p√°ginas.
                     C√≥mo se usa: el JS actualiza los n√∫meros y habilita botones. -->
                 <div class="barra-inferior-unificada">
                    <div class="estadisticas-inferiores">
                        <div class="stat-item-inferior">
                            <span class="stat-label-inferior">Activos:</span>
                            <span class="stat-numero-inferior" id="enActivos">0</span>
                        </div>
                        <div class="stat-item-inferior">
                            <span class="stat-label-inferior">Inactivos:</span>
                            <span class="stat-numero-inferior" id="enInactivos">0</span>
                        </div>
                    </div>
                    <div class="contador-registros">
                        <span id="mostrandoRegistros">Mostrando 0 de 0</span>
                        <button id="btnRecargar" class="btn btn-icon">üîÑ</button>
                    </div>
                    <div class="paginacion-inferior">
                        <button id="btnAnterior" class="btn btn-outline" disabled>‚Üê Anterior</button>
                        <span id="infoPagina">P√°gina 1 de 1</span>
                        <button id="btnSiguiente" class="btn btn-outline" disabled>Siguiente ‚Üí</button>
                    </div>
                </div>

        <!-- Overlay de carga (oculto por defecto) -->
           <!-- OVERLAY DE CARGA DEL M√ìDULO
               Qu√© es: pantalla ligera que dice "Cargando proveedores...".
               C√≥mo se usa: mostrar/ocultar desde JS cuando hay operaciones. -->
           <div class="loading-overlay" id="loading" style="display:none;">
            <div class="loading-spinner"></div>
            <p>Cargando proveedores...</p>
        </div>

        <!-- MODAL: formulario de proveedor (misma estructura que custodias) -->
           <!-- MODAL DE PROVEEDOR
               Qu√© es: formulario con pesta√±as para capturar informaci√≥n.
               C√≥mo se usa: el bot√≥n Nuevo abre este modal; el JS llena/guarda. -->
           <div class="modal-overlay" id="modalProveedor" style="display:none;">
            <div class="modal-container modal-compact">
                <div class="modal-header">
                    <div class="modal-title"><h2 id="modalTitleProveedor">ALTA DE PROVEEDORES</h2></div>
                    <div class="modal-header-buttons"><button class="btn-header-icon" id="btnCloseModalProveedor" title="Cerrar">‚úï</button></div>
                </div>

                <div class="modal-tabs">
                    <button class="tab-button active" data-tab="datosGenerales">Datos generales</button>
                    <button class="tab-button" data-tab="expediente">Expediente</button>
                    <button class="tab-button" data-tab="informacionComercial">Informaci√≥n comercial</button>
                    <button class="tab-button" data-tab="informacionFinanciera">Informaci√≥n financiera</button>
                </div>

                <div class="modal-content-compact">
                    <form id="formProveedor">
                            <!-- PESTA√ëA: DATOS GENERALES
                                Contiene Informaci√≥n General y Sucursales. -->
                            <div class="tab-content active" id="tabDatosGenerales">
                               <!-- Secci√≥n: Datos Fiscales -->
                               <div class="collapsible-section">
                                <div class="section-header-collapse">
                                    <span class="collapse-icon">‚ñº</span>
                                    <span class="section-title-text">Datos Fiscales</span>
                                </div>
                                <div class="section-body">
                               <table class="form-table">
                                <tr>
                                    <td class="label-cell">ID</td>
                                    <td class="input-cell"><input type="text" id="modalIdProveedor" readonly></td>
                                    <td class="label-cell">Fecha de registro</td>
                                    <td class="input-cell"><input id="modalFechaRegistro" type="text" readonly></td>
                                </tr>
                                <tr>
                                    <td class="label-cell">C√≥digo</td>
                                    <td class="input-cell"><input type="text" id="modalCodigo"></td>
                                    <td class="label-cell">Estatus</td>
                                    <td class="input-cell">
                                        <select id="modalEstatus">
                                            <option value="true">Activo</option>
                                            <option value="false">Inactivo</option>
                                        </select>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="label-cell">Nombre <span class="required">*</span></td>
                                    <td class="input-cell" colspan="3"><input type="text" id="modalNombre" required></td>
                                </tr>
                                <tr>
                                    <td class="label-cell">RFC <span class="required">*</span></td>
                                    <td class="input-cell" colspan="3"><input id="modalRfc" type="text" required></td>
                                </tr>
                                <tr>
                                    <td class="label-cell">Direcci√≥n fiscal <span class="required">*</span></td>
                                    <td class="input-cell" colspan="3"><input id="modalDireccion" type="text" required></td>
                                </tr>
                            </table>
                                </div>
                            </div>
                                                        <!-- Secci√≥n: Servicios Prestados -->
                            <div class="collapsible-section">
                                <div class="section-header-collapse">
                                    <span class="collapse-icon">‚ñº</span>
                                    <span class="section-title-text">Servicios Prestados</span>
                                </div>
                                <div class="section-body">
                                    <div class="en-desarrollo"><span>En desarrollo</span></div>
                                    <div class="empty-tab"><small>Lista de servicios que presta el proveedor</small></div>
                                </div>
                            </div>
                                                                 <!-- Secci√≥n: Sucursales -->
                                         <!-- SUCURSALES-->
                               <div class="collapsible-section">
                                <div class="section-header-collapse">
                                    <span class="collapse-icon">‚ñº</span>
                                    <span class="section-title-text">Sucursales</span>
                                </div>
                                <div class="section-body">
                                    <!-- Barra de acciones de sucursales -->
                                    <div class="toolbar-inline">
                                        <button class="btn btn-primary btn-sm" id="btnAgregarSucursal" title="Agregar sucursal">+
                                        </button>
                                    </div>
                                    <!-- Espacio en blanco simb√≥lico y lista -->
                                    <div class="sucursales-lista" id="listaSucursales">
                                        <!-- Aqu√≠ se renderizar√°n las sucursales agregadas -->
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Secci√≥n: Agenda de Proveedor y Contactos -->
                            <div class="collapsible-section">
                                <div class="section-header-collapse">
                                    <span class="collapse-icon">‚ñº</span>
                                    <span class="section-title-text">Agenda de Proveedor y Contactos</span>
                                </div>
                                <div class="section-body">
                                    <!-- Barra de acciones de contactos -->
                                    <div class="toolbar-inline">
                                        <button class="btn btn-primary btn-sm" id="btnAgregarContacto" title="Agregar contacto" onclick="window.ProveedoresManager.openModalContacto();">+ 
                                        </button>
                                    </div>
                                    <!-- Lista de contactos -->
                                    <div class="contactos-lista" id="listaContactos">
                                        <!-- Aqu√≠ se renderizar√°n los contactos agregados -->
                                    </div>
                                </div>
                            </div>
                            
                        </div>
                            <!-- PESTA√ëA: EXPEDIENTE
                                Informaci√≥n del expediente del proveedor. -->
                            <div class="tab-content" id="tabExpediente">
                            <div class="collapsible-section">
                                <div class="section-header-collapse"><span class="collapse-icon">‚ñº</span><span class="section-title-text">Informaci√≥n de expediente</span></div>
                                <div class="section-body">
                                    <table class="form-table">
                                        <tr>
                                            <td class="label-cell">Tipo</td>
                                            <td class="input-cell"><input id="modalExpTipo" type="text"></td>
                                            <td class="label-cell">Estado</td>
                                            <td class="input-cell"><input id="modalExpEstado" type="text"></td>
                                        </tr>
                                        <tr>
                                            <td class="label-cell">Notas</td>
                                            <td class="input-cell" colspan="3"><input id="modalExpNotas" type="text"></td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <!-- PESTA√ëA: INFORMACI√ìN COMERCIAL -->
                        <div class="tab-content" id="tabInformacionComercial">
                            <div class="collapsible-section">
                                <div class="section-header-collapse"><span class="collapse-icon">‚ñº</span><span class="section-title-text">Informaci√≥n Comercial</span></div>
                                <div class="section-body">
                                    <div class="en-desarrollo"><span>En desarrollo</span></div>
                                    <div class="empty-tab"><small>Resumen de Informaci√≥n Comercial</small></div>
                                </div>
                            </div>
                        </div>
                        <!-- PESTA√ëA: INFORMACI√ìN FINANCIERA -->
                        <div class="tab-content" id="tabInformacionFinanciera">
                            <div class="collapsible-section">
                                <div class="section-header-collapse"><span class="collapse-icon">‚ñº</span><span class="section-title-text">Informaci√≥n Financiera</span></div>
                                <div class="section-body">
                                    <div class="en-desarrollo"><span>En desarrollo</span></div>
                                    <div class="empty-tab"><small>Resumen de Informaci√≥n Financiera</small></div>
                                </div>
                            </div>
                        </div>
                        <div class="tab-content" id="tabDocumentos"><div class="empty-tab"><p>üìÑ Secci√≥n de documentos</p></div></div>
                    </form>
                </div>

                <div class="modal-footer">
                    <button class="btn btn-primary" id="btnGuardarModalProveedor">GUARDAR</button>
                </div>
            </div>
        </div>

    </div>

    <!-- MODAL: Agregar/Editar Sucursal -->
        <!-- MODAL DE SUCURSAL
            Qu√© es: peque√±o formulario para a√±adir/editar una sucursal.
            Campos: Tipo, Nombre y direcci√≥n desglosada. -->
        <div class="modal-overlay" id="modalSucursal" style="display:none;">
        <div class="modal-container modal-compact">
            <div class="modal-header">
                <div class="modal-title"><h2 id="modalTitleSucursal">Agregar Sucursal</h2></div>
                <div class="modal-header-buttons"><button class="btn-header-icon" id="btnCloseModalSucursal" title="Cerrar">‚úï</button></div>
            </div>

            <div class="modal-content-compact">
                <form id="formSucursal">
                    <table class="form-table">
                        <tr>
                            <td class="label-cell">Tipo</td>
                            <td class="input-cell">
                                <select id="modalSucursalTipo" required>
                                    <option value="">Seleccione tipo</option>
                                    <option value="corporativo">Corporativo</option>
                                    <option value="oficinas">Oficinas</option>
                                    <option value="almacen">Almac√©n</option>
                                    <option value="punto-venta">Punto de Venta</option>
                                </select>
                            </td>
                            <td class="label-cell">Nombre Sucursal</td>
                            <td class="input-cell"><input id="modalSucursalNombre" type="text" required></td>
                        </tr>
                        <tr>
                            <td class="label-cell">Pa√≠s</td>
                            <td class="input-cell"><input id="modalSucursalPais" type="text" value="M√©xico"></td>
                            <td class="label-cell">Estado</td>
                            <td class="input-cell"><input id="modalSucursalEstado" type="text"></td>
                        </tr>
                        <tr>
                            <td class="label-cell">Municipio</td>
                            <td class="input-cell"><input id="modalSucursalMunicipio" type="text"></td>
                            <td class="label-cell">Localidad</td>
                            <td class="input-cell"><input id="modalSucursalLocalidad" type="text"></td>
                        </tr>
                        <tr>
                            <td class="label-cell">Calle</td>
                            <td class="input-cell"><input id="modalSucursalCalle" type="text"></td>
                            <td class="label-cell">Colonia</td>
                            <td class="input-cell"><input id="modalSucursalColonia" type="text"></td>
                        </tr>
                        <tr>
                            <td class="label-cell">C√≥digo postal</td>
                            <td class="input-cell"><input id="modalSucursalCP" type="text" maxlength="5"></td>
                            <td class="label-cell">No. exterior</td>
                            <td class="input-cell"><input id="modalSucursalNoExterior" type="text"></td>
                        </tr>
                        <tr>
                            <td class="label-cell">No. interior</td>
                            <td class="input-cell"><input id="modalSucursalNoInterior" type="text"></td>
                            <td class="label-cell">C√≥digo Colonia (Opcional)</td>
                            <td class="input-cell"><input id="modalSucursalCodigoColonia" type="text"></td>
                        </tr>
                        <tr>
                            <td class="label-cell">C√≥digo Localidad (Opcional)</td>
                            <td class="input-cell"><input id="modalSucursalCodigoLocalidad" type="text"></td>
                            <td class="label-cell"></td>
                            <td class="input-cell"></td>
                        </tr>
                    </table>
                </form>
            </div>

            <div class="modal-footer">
                <button class="btn btn-secondary" id="btnCancelarSucursal">Cancelar</button>
                <button class="btn btn-primary" id="btnGuardarSucursal">Aceptar</button>
            </div>
        </div>
    </div>

    <!-- MODAL: Agregar/Editar Contacto -->
        <!-- MODAL DE CONTACTO
            Campos: √Årea, Nombre, Tel√©fono, Ext., Correo, Dato1, Dato2. -->
        <div class="modal-overlay" id="modalContacto" style="display:none;">
        <div class="modal-container modal-compact">
            <div class="modal-header">
                <div class="modal-title"><h2 id="modalTitleContacto">Agregar Contacto</h2></div>
                <div class="modal-header-buttons"><button class="btn-header-icon" id="btnCloseModalContacto" title="Cerrar">‚úï</button></div>
            </div>

            <div class="modal-content-compact">
                <form id="formContacto">
                    <table class="form-table">
                        <tr>
                            <td class="label-cell">√Årea</td>
                            <td class="input-cell">
                                <select id="modalContactoArea" required>
                                    <option value="">Seleccionar...</option>
                                    <option value="Ventas">Ventas</option>
                                    <option value="Compras">Compras</option>
                                    <option value="Administraci√≥n">Administraci√≥n</option>
                                    <option value="Log√≠stica">Log√≠stica</option>
                                    <option value="Finanzas">Finanzas</option>
                                    <option value="Otro">Otro</option>
                                </select>
                            </td>
                            <td class="label-cell">Nombre</td>
                            <td class="input-cell"><input id="modalContactoNombre" type="text" required></td>
                        </tr>
                        <tr>
                            <td class="label-cell">Tel√©fono</td>
                            <td class="input-cell"><input id="modalContactoTelefono" type="text"></td>
                            <td class="label-cell">Ext.</td>
                            <td class="input-cell"><input id="modalContactoExt" type="text"></td>
                        </tr>
                        <tr>
                            <td class="label-cell">Correo</td>
                            <td class="input-cell" colspan="3"><input id="modalContactoCorreo" type="email"></td>
                        </tr>
                        <tr>
                            <td class="label-cell">Dato 1</td>
                            <td class="input-cell"><input id="modalContactoDato1" type="text"></td>
                            <td class="label-cell">Dato 2</td>
                            <td class="input-cell"><input id="modalContactoDato2" type="text"></td>
                        </tr>
                    </table>
                </form>
            </div>

            <div class="modal-footer">
                <button class="btn btn-secondary" id="btnCancelarContacto">Cancelar</button>
                <button class="btn btn-primary" id="btnGuardarContacto">Aceptar</button>
            </div>
        </div>
    </div>

    <!-- Tabla desactivada globalmente: no se cargan utilidades de tabla -->
    <!-- Corregido path del script: carpeta en min√∫sculas -->
    <script src="/modules/compras/proveedores/proveedores.js"></script>
</body>
</html>
